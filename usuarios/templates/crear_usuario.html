{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crear Usuario</title>
    <link rel="stylesheet" href="{% static 'registro/crear_usuario.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.js"></script>
    <style>
        .error {
            color: red; /* Cambia el color del texto a rojo */
            font-size: 0.9em; /* Ajusta el tamaño de la fuente si es necesario */
        }
    </style>
</head>
<body>
    <div class="header">
        <img src="{% static 'Pawmeet.png' %}" alt="Logo" class="logo">
        <h1>Crear Usuario</h1>
    </div>
    <form method="post" action="{% url 'crear_usuario' %}" enctype="multipart/form-data">
        {% csrf_token %}
        <h2>Datos personales</h2>

        <div class="form-field">
            {{ user_form.email.label_tag }}
            {{ user_form.email }}
            {% if user_form.email.errors %}
                <div class="error">
                    {% for error in user_form.email.errors %}
                        {{ error|escape }}<br>
                    {% endfor %}
                </div>
            {% endif %}
        </div>
        <div class="form-field">
            {{ user_form.username.label_tag }}
            {{ user_form.username }}
            {% if user_form.username.errors %}
                <div class="error">
                    {% for error in user_form.username.errors %}
                        {{ error|escape }}<br>
                    {% endfor %}
                </div>
            {% endif %}
        </div>
        <div class="form-field">
            {{ user_form.password.label_tag }}
            {{ user_form.password }}
            {% if user_form.password.errors %}
                <div class="error">
                    {% for error in user_form.password.errors %}
                        {{ error|escape }}<br>
                    {% endfor %}
                </div>
            {% endif %}
        </div>

        <div class="form-field">
            {{ profile_form.fecha_nacimiento_dueño.label_tag }}
            {{ profile_form.fecha_nacimiento_dueño }}
            {% if profile_form.fecha_nacimiento_dueño.errors %}
                <div class="error">
                    {% for error in profile_form.fecha_nacimiento_dueño.errors %}
                        {{ error|escape }}<br>
                    {% endfor %}
                </div>
            {% endif %}
        </div>
        <div class="form-field">
            {{ profile_form.telefono.label_tag }}
            {{ profile_form.telefono }}
            {% if profile_form.telefono.errors %}
                <div class="error">
                    {% for error in profile_form.telefono.errors %}
                        {{ error|escape }}<br>
                    {% endfor %}
                </div>
            {% endif %}
        </div>
        <div class="form-field">
            {{ profile_form.direccion.label_tag }}
            {{ profile_form.direccion }}
            {% if profile_form.direccion.errors %}
                <div class="error">
                    {% for error in profile_form.direccion.errors %}
                        {{ error|escape }}<br>
                    {% endfor %}
                </div>
            {% endif %}
        </div>

        <button type="submit">Crear Usuario</button>

    </form>
</body>
</html>

<!--
TOT AQUEST HTML ES PER SI HI HA DOS TIPUS DE PERFILS.
{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crear Usuario</title>
    <link rel="stylesheet" href="{% static 'registro/crear_usuario.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.js"></script>
    <style>
        .error {
            color: red;
            font-size: 0.9em;
        }
    </style>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const tipoUsuarioSelect = document.getElementById('id_tipo_usuario');
            const perfilDueñoFields = document.getElementById('perfil_dueño');
            const perfilProfesionalFields = document.getElementById('perfil_profesional');

            tipoUsuarioSelect.addEventListener('change', function () {
                if (tipoUsuarioSelect.value === 'dueño') {
                    perfilDueñoFields.style.display = 'block';
                    perfilProfesionalFields.style.display = 'none';
                } else if (tipoUsuarioSelect.value === 'profesional') {
                    perfilDueñoFields.style.display = 'none';
                    perfilProfesionalFields.style.display = 'block';
                }
            });

            tipoUsuarioSelect.dispatchEvent(new Event('change')); // Inicializa el estado al cargar
        });
    </script>
</head>
<body>
    <div class="header">
        <img src="{% static 'Pawmeet.png' %}" alt="Logo" class="logo">
        <h1>Crear Usuario</h1>
    </div>
    <form method="post" action="{% url 'crear_usuario' %}" enctype="multipart/form-data">
        {% csrf_token %}
        <h2>Datos personales</h2>

        <div class="form-field">
            {{ user_form.username.label_tag }}
            {{ user_form.username }}
            {% if user_form.username.errors %}
                <div class="error">
                    {% for error in user_form.username.errors %}
                        {{ error|escape }}<br>
                    {% endfor %}
                </div>
            {% endif %}
        </div>
        <div class="form-field">
            {{ user_form.email.label_tag }}
            {{ user_form.email }}
            {% if user_form.email.errors %}
                <div class="error">
                    {% for error in user_form.email.errors %}
                        {{ error|escape }}<br>
                    {% endfor %}
                </div>
            {% endif %}
        </div>
        <div class="form-field">
            {{ user_form.password1.label_tag }}
            {{ user_form.password1 }}
            {% if user_form.password1.errors %}
                <div class="error">
                    {% for error in user_form.password1.errors %}
                        {{ error|escape }}<br>
                    {% endfor %}
                </div>
            {% endif %}
        </div>

        <h2>Tipo de Usuario</h2>
        <div class="form-field">
            <label for="tipo_usuario">Selecciona el tipo de usuario:</label>
            <select name="tipo_usuario" id="id_tipo_usuario">
                <option value="dueño">Amo de Mascota</option>
                <option value="profesional">Profesional</option>
            </select>
        </div>

        <div id="perfil_dueño" style="display: none;">
            <h2>Datos del Dueño</h2>
            <div class="form-field">
                {{ profile_form.fecha_nacimiento_dueño.label_tag }}
                {{ profile_form.fecha_nacimiento_dueño }}
                {% if profile_form.fecha_nacimiento_dueño.errors %}
                    <div class="error">
                        {% for error in profile_form.fecha_nacimiento_dueño.errors %}
                            {{ error|escape }}<br>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
            <div class="form-field">
                {{ profile_form.telefono.label_tag }}
                {{ profile_form.telefono }}
                {% if profile_form.telefono.errors %}
                    <div class="error">
                        {% for error in profile_form.telefono.errors %}
                            {{ error|escape }}<br>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
            <div class="form-field">
                {{ profile_form.direccion.label_tag }}
                {{ profile_form.direccion }}
                {% if profile_form.direccion.errors %}
                    <div class="error">
                        {% for error in profile_form.direccion.errors %}
                            {{ error|escape }}<br>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
        </div>

        <div id="perfil_profesional" style="display: none;">
            <h2>Datos del Profesional</h2>
            <div class="form-field">
                {{ profile_form.nombre_establecimiento.label_tag }}
                {{ profile_form.nombre_establecimiento }}
                {% if profile_form.nombre_establecimiento.errors %}
                    <div class="error">
                        {% for error in profile_form.nombre_establecimiento.errors %}
                            {{ error|escape }}<br>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
            <div class="form-field">
                {{ profile_form.tipo_de_profesional.label_tag }}
                {{ profile_form.tipo_de_profesional }}
                {% if profile_form.tipo_de_profesional.errors %}
                    <div class="error">
                        {% for error in profile_form.tipo_de_profesional.errors %}
                            {{ error|escape }}<br>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
            <div class="form-field">
                {{ profile_form.direccion.label_tag }}
                {{ profile_form.direccion }}
                {% if profile_form.direccion.errors %}
                    <div class="error">
                        {% for error in profile_form.direccion.errors %}
                            {{ error|escape }}<br>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
            <div class="form-field">
                {{ profile_form.telefono.label_tag }}
                {{ profile_form.telefono }}
                {% if profile_form.telefono.errors %}
                    <div class="error">
                        {% for error in profile_form.telefono.errors %}
                            {{ error|escape }}<br>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
            <div class="form-field">
                {{ profile_form.foto_establecimiento.label_tag }}
                {{ profile_form.foto_establecimiento }}
                {% if profile_form.foto_establecimiento.errors %}
                    <div class="error">
                        {% for error in profile_form.foto_establecimiento.errors %}
                            {{ error|escape }}<br>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
        </div>

        
        <button type="submit">Crear Usuario</button>
    </form>

    {% if messages %}
        <script>
            {% for message in messages %}
                swal({
                    title: "¡Éxito!",
                    text: "{{ message }}",
                    type: "success",
                    confirmButtonText: "Aceptar"
                }).then(function() {
                    // Asegúrate de redirigir a la URL correcta, pasando el usuario_id si es necesario
                    window.location.href = "{% url 'crear_mascota' usuario_id=usuario.id %}";
                });
            {% endfor %}
        </script>
    {% endif %}
</body>
</html>

--> 